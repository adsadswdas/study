### 1. 动态代理（ClientProxy）

- **作用**：
  - 隐藏底层网络调用细节，让调用方像调用本地方法一样调用远程服务。
- **实现技术**：
  - 使用JDK动态代理（`InvocationHandler`），自动生成RPC请求发送给服务端。

------

### 可能的问题：

> 动态代理在RPC调用中起到了什么作用？你具体怎么实现的？

你可以这样回答：

> 动态代理屏蔽了网络通信的复杂性，客户端调用接口方法时，代理会自动将方法调用转换成RPC请求，序列化后发送到服务端，等待响应并反序列化返回给调用方。
>
> 我用的是JDK动态代理，通过InvocationHandler实现了方法拦截、请求封装、网络调用及响应处理。

------

## 📌 序列化机制：

- 实现了多种序列化方法：
  - Hessian、Kryo、Protostuff、JSON、JDK原生序列化。
- 序列化接口统一，便于扩展。

### 可能的问题：

> 你实现了哪些序列化方式？分别有什么特点？

你可以这样回答：

> 实现了Hessian、Kryo、Protostuff、JSON和Java自带序列化共5种方式。
>
> - Hessian是成熟、稳定的RPC序列化方案；
> - Kryo速度更快，适合对性能要求高的场景；
> - Protostuff轻量快速，序列化体积更小；
> - JSON则可读性更好，调试方便，但性能较低；
> - Java序列化仅用于测试，性能最差，但实现简单。

------

## ⚖️ 负载均衡：

- 提供了随机、轮询和一致性哈希三种实现。

### 可能的问题：

> 解释一下你的一致性哈希负载均衡怎么实现的？

你可以这样回答：

> 我的一致性哈希实现采用了虚拟节点的机制，每个真实节点映射多个虚拟节点到哈希环上。
>
> - 当请求到达时，计算请求的哈希值，顺时针寻找最近的虚拟节点并映射到真实节点。
> - 这样可以有效应对节点的增减，最小化迁移代价和平衡负载。

------

## 🚩 服务注册与发现（Zookeeper）：

- 使用Zookeeper + Curator实现服务注册与发现。

### 可能的问题：

> 为什么要用Zookeeper实现服务注册？

你可以这样回答：

> 因为Zookeeper提供高可用的分布式协调机制，非常适合做服务注册与发现，服务端注册为临时节点，服务宕机后自动删除节点，客户端可以及时感知服务上下线状态，并动态调整服务地址列表，保证系统的高可用性。

------

## ⛔ 熔断机制：

- 使用Circuit Breaker模式保护服务。

### 可能的问题：

> 熔断机制是什么，如何实现？

你可以这样回答：

> 熔断机制是通过监测服务失败率，短时间内出现大量失败后，自动断开对该服务的调用，避免频繁的失败请求拖垮整个系统。
>
> 我实现的熔断器维护三种状态：关闭（正常调用）、开启（完全阻止调用）和半开（尝试恢复调用）。通过失败请求比例决定状态切换，达到一定阈值自动熔断，定期恢复尝试请求。

------

## 📌 限流机制：

- 使用令牌桶算法实现限流（TokenBucketRateLimitImpl）。

### 可能的问题：

> 为什么要加限流机制？你怎么实现的？

你可以这样回答：

> 限流是为了防止突发高并发导致服务资源耗尽或系统崩溃。 我用令牌桶算法实现：
>
> - 请求到来时判断桶内是否有令牌，若有则允许请求，否则拒绝；
> - 令牌以固定速率产生，能够平滑处理流量峰值，确保服务稳定。

------

## 🚀 通信方式（Netty）：

- 主要使用Netty实现高性能RPC调用。
- 也提供Java原生socket的简单实现，用于基础验证。

### 可能的问题：

> 为什么选择Netty作为RPC通信框架？

你可以这样回答：

> Netty是高性能的NIO框架，提供异步非阻塞的事件驱动模型，能够高效处理大量并发请求，特别适合高并发RPC通信场景。 相比传统阻塞I/O，Netty能更高效地处理大量并发连接，降低资源消耗，提升系统吞吐量。

------

## 📌 熔断与重试机制：

- 熔断：自动隔离故障节点。
- 重试：使用Guava Retry工具类提供失败请求自动重试能力。

### 可能的问题：

> 重试机制实现过程中需要注意什么？

你可以这样回答：

> 实现重试时要注意重试次数与间隔的设置，避免过多的重试造成更大压力，或者雪崩效应。另外，也需要注意幂等性，以免因为重试造成重复操作。

------

## 🚩 项目亮点小结（面试官问项目亮点时使用）：

- 采用多种序列化机制与负载均衡算法，具备高可扩展性；
- 采用动态代理，用户使用更简单；
- 使用Zookeeper动态服务注册与发现，提升服务高可用性；
- 使用Netty进行网络通信，系统高性能；
- 实现熔断、限流与重试机制，提升服务健壮性与稳定性。